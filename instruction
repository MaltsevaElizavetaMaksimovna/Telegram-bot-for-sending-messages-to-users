#1
sudo apt update
sudo apt install nginx libnss3-tools curl -y

#2
curl -JLO "https://dl.filippo.io/mkcert/latest?for=linux/amd64"
chmod +x mkcert-v*-linux-amd64
sudo cp mkcert-v*-linux-amd64 /usr/local/bin/mkcert

mkcert -install
mkcert localhost 127.0.0.1 ::1
#

#3 Пускаем бекенд через nginx
sudo nano /etc/nginx/sites-available/vk-https

#
# Автоматический редирект с HTTP на HTTPS
server {
    listen 80;
    server_name localhost;
    return 301 https://$host$request_uri;
}

# Основной HTTPS-сервер
server {
    listen 443 ssl;
    server_name localhost;

    ssl_certificate /home/ilya/vk_auth_copy/localhost+2.pem;
    ssl_certificate_key /home/ilya/vk_auth_copy/localhost+2-key.pem;

    location / {
        proxy_pass http://127.0.0.1:5000;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
    }
}

#

sudo ln -sf /etc/nginx/sites-available/vk-https /etc/nginx/sites-enabled/
sudo rm -f /etc/nginx/sites-enabled/default
sudo nginx -t && sudo systemctl reload nginx
#

#4 VK
Платформа: Web
Базовый домен: localhost
Доверенный redirect URL: https://localhost/auth

#5
python3 app.py
Установи зависимости если необходимо pip install -r requirements.txt

#6
Перейди по https://localhost


